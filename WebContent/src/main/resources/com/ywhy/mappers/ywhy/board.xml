<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="Board"><!-- 매퍼 네임 스페이스 명을 Board로 설정 -->
 	
 	<!-- 커뮤니티 목록보기 -->
 	<select id="board_list" resultType="com.ywhy.vo.BoardVO"> <!-- parameterType속성은 생략가능 -->
 	select * from (select rowNum rNum,b_no,b_name,b_title,b_hit,b_date 
 		from (select * from board  
 		<where>
 			<if test="find_field == ''"></if><!-- 검색전 -->
 			<if test="find_field == 'b_title'"> <!-- 제목 검색 -->
 			b_title like #{find_name}<!-- like는 검색 연산자 -->
 			</if>
 			<if test="find_field == 'b_cont'"><!-- 내용검색 -->
 			b_cont like #{find_name}
 			</if>
 		</where>
 		order by b_no desc)) 
 		where rNum &gt;= ${startrow} and rNum &lt;= ${endrow}
 	</select>
 	
 	<!-- 커뮤니티 총 게시물 수 -->
 	<select id="b_count" resultType="int">
 		select count(*) from board
 		<where>
 			<if test="find_field == ''"></if><!-- 검색전 -->
 			<if test="find_field == 'b_title'"> <!-- 제목 검색 -->
 			b_title like #{find_name}<!-- like는 검색 연산자 -->
 			</if>
 			<if test="find_field == 'b_cont'"><!-- 내용검색 -->
 			b_cont like #{find_name}
 			</if>
 		</where>
 	</select>
 	
 	<!-- 게시글 저장  -->
 	<insert id="b_in" parameterType="com.ywhy.vo.BoardVO">
 	<!-- parameterType은 전달인자 자료형  -->
 	insert into board (b_no,b_name,b_cate,b_title,b_cont,b_date)
 	values(b_no_seq.nextval,#{b_name},#{b_cate},#{b_title},#{b_cont},sysdate)
 	</insert>
 	
 </mapper>