<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
  <mapper namespace="AdminBoard">
  
  <!-- Q&A 총 게시물 수 -->
   <select id="aq_count" resultType="int">
      select count(*) from board
      <where>          
         <if test="find_field=='' || find_field==null">b_cate like 'Q%'</if>
         <if test="find_field=='b_title'">b_cate like 'Q%' and b_title like #{find_name}</if>
         <if test="find_field=='b_cont'">b_cate like 'Q%' and b_cont like #{find_name}</if>
      </where>
     </select>
     
   <!-- Q&A 목록보기 -->
   <select id="aq_list" resultType="com.ywhy.vo.BoardVO"> 
   select * from (select rowNum rNum,b_no,b_name,b_title,b_hit,b_date,b_replycnt,b_rec,b_ref,b_step,b_level,b_cate,b_tag
      from (select * from board 
      <where>
         b_cate like 'Q%'
         <if test="find_field=='b_title'">and b_title like #{find_name}</if>
         <if test="find_field=='b_cont'">and b_cont like #{find_name}</if>
      </where>
      order by b_ref desc, b_level asc))
      where rNum &gt;= ${startrow} and rNum &lt;= ${endrow}
   </select>
   
   <delete id="aq_del">
   	delete from board where b_no=#{b_no}
   </delete>
  
  </mapper>